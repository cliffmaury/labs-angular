<!DOCTYPE html>
<html lang="en">
<head>

    <title>Labs Angular</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Merriweather:400,300,700" rel="stylesheet" type="text/css">

    <link type="text/css" rel="stylesheet" href="assets/styles/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="assets/styles/github-markdown.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/github.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/glyph.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/main.css" />

</head>
<body>


<header class="navbar-fixed">

    <nav class="navbar">
        <div class="nav-wrapper">
            <a href="http://valtech.fr" class="brand-logo hide-on-med-and-down">
                <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>
            </a>

            <a class="brand-logo center">
                Labs Angular
            </a>

            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>

            <ul class="right">
                <li>
                    <a href="https://github.com/NodeAndTyped/labs-angular/" title="See on github">
                        <i class="material-icons">visibility</i>
                    </a>
                </li>

                <li>
                    <a href="https://github.com/NodeAndTyped/labs-angular/zipball/master" title="download">
                        <i class="material-icons">file_download</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a class="dropdown-button" href="#!" data-activates="dropdown1">
                        <i class="material-icons">menu</i>
                    </a>
                </li>
            </ul>


        </div>
    </nav>

</header>

<ul class="side-nav" id="mobile-demo">

    <li class="logo">

        <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>

    </li>

    
            <li><a href="#accueil">Accueil</a></li>
        
            <li><a href="#tp1installation">TP 1 - Installation</a></li>
        
            <li><a href="#tp2lecomposantchronometre">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="#tp3creerunelistedutilisateursenligne">TP 3 - Créer une liste d&#39;utilisateurs en ligne</a></li>
        
            <li><a href="#tp4formulairesetroutes">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="#tp5integrationdeswebservices">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="#tp6programmationreactiveetwebsocket">TP 6 - Programmation reactive et websocket</a></li>
        
</ul>

<ul id="dropdown1" class="dropdown-content">
    
            <li><a href="#accueil">Accueil</a></li>
        
            <li><a href="#tp1installation">TP 1 - Installation</a></li>
        
            <li><a href="#tp2lecomposantchronometre">TP 2 - Le composant Chronomètre</a></li>
        
            <li><a href="#tp3creerunelistedutilisateursenligne">TP 3 - Créer une liste d&#39;utilisateurs en ligne</a></li>
        
            <li><a href="#tp4formulairesetroutes">TP 4 - Formulaires et routes</a></li>
        
            <li><a href="#tp5integrationdeswebservices">TP 5 - Intégration des webservices</a></li>
        
            <li><a href="#tp6programmationreactiveetwebsocket">TP 6 - Programmation reactive et websocket</a></li>
        
</ul>

<div class="container container-body">
    <article class="markdown-body">
        <div id="accueil"></div>
<h1>Sommaire</h1>
<p>Nous verrons au cours des travaux pratiques les points suivants :</p>
<ul class="page-summary">
    
        <li><a href="#tp1installation">TP 1 - Installation</a></li>
    
        <li><a href="#tp2lecomposantchronometre">TP 2 - Le composant Chronomètre</a></li>
    
        <li><a href="#tp3creerunelistedutilisateursenligne">TP 3 - Créer une liste d&#39;utilisateurs en ligne</a></li>
    
        <li><a href="#tp4formulairesetroutes">TP 4 - Formulaires et routes</a></li>
    
        <li><a href="#tp5integrationdeswebservices">TP 5 - Intégration des webservices</a></li>
    
        <li><a href="#tp6programmationreactiveetwebsocket">TP 6 - Programmation reactive et websocket</a></li>
    
</ul>

<h1>Objectifs</h1>
<p>Le labs a pour objectif de vous présenter les différentes fonctionnalités d'Angular. Au programme :</p>
<ul>
<li>Mise en place de l'environnement avec <code>@angular/cli</code>,</li>
<li>Création d'un composant chronomètre et d'un Pipe,</li>
<li>Utilisation des services Angular pour communiquer avec le backend,</li>
<li>Création d'un formulaire de saisie,</li>
<li>Mise en place du routage.</li>
</ul>

<div id="tp1installation"></div>
<h1>TP 1</h1>
<blockquote>
<p>Installation de l'environnement</p>
</blockquote>
<h2>Prérequis</h2>
<p>Vérifier que vous avez les éléments suivants d’installé sur votre poste :</p>
<ul>
<li>Node v6 ou plus avec la commande npm –v,</li>
<li>Git, nous l’utiliserons pour récupérer le projet initial,</li>
<li>Webstorm (ou un autre IDE)</li>
</ul>
<h2>Installation</h2>
<h3>Initialisation du projet</h3>
<p>Nous allons utiliser l'outil <code>@angular/cli</code> pour générer le projet. Placez-vous dans votre workspace
et lancez les commandes suivantes :</p>
<pre><code class="bash">npm install -g @angular/cli
ng new tp-angular
cd tp-angular
</code></pre>
<blockquote>
<p>Une fois le projet créé vous pouvez l'ouvrir dans votre IDE.</p>
</blockquote>
<p>Pour lancer le serveur de développement :</p>
<pre><code class="bash">ng serve
</code></pre>
<h2>Installation d'Angular Material</h2>
<p>Nous allons utiliser Angular material pour créer les interfaces de nos applications.</p>
<p>Lancer la commande suivante:</p>
<pre><code class="bash">npm install --save @angular/material
npm install --save @angular/animations
</code></pre>
<p>Puis rajouter dans le fichier <code>app.module.ts</code> la dépendence du module comme suivant :</p>
<pre><code class="typescript">import { BrowserAnimationsModule } from '@angular/platform-browser/animations';
import { MaterialModule } from '@angular/material';
// other imports 
@NgModule({
  ...  
  imports: [
      BrowserAnimationsModule, 
      MaterialModule
  ],
  ...
})
export class AppModule { }
</code></pre>
<p>En complément vous pouvez rajouter la feuille de style suivante dans la page index si vous voulez utiliser
les icônes de la librairie Material :</p>
<pre><code class="html">&#x3C;link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</code></pre>
<p>Enfin dans le <code>styles.css</code>, ajouter le thème :</p>
<pre><code class="css">@import '~@angular/material/prebuilt-themes/indigo-pink.css';

body {
    padding: 0;
    margin:0;
    font-family: Roboto,"Helvetica Neue",sans-serif;
}
</code></pre>
<h2>Générer des Composants, Directives, Pipe, etc...</h2>
<p>Vous pouvez utiliser la commande <code>ng generate</code> (ou <code>ng g</code>) pour générer des composants Angular : </p>
<pre><code class="bash">ng generate component my-new-component
ng g component my-new-component # using the alias

# components support relative path generation
# if in the directory src/app/feature/ and you run
ng g component new-cmp
# your component will be generated in src/app/feature/new-cmp
# but if you were to run
ng g component ../newer-cmp
# your component will be generated in src/app/newer-cmp
</code></pre>
<p>Voici la liste des commandes possibles pour générer une fonctionnalité d'Angular: </p>
<table>
<thead>
<tr>
<th>Génération</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-component">Component</a></td>
<td><code>ng g component my-new-component</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-directive">Directive</a></td>
<td><code>ng g directive my-new-directive</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-pipe">Pipe</a></td>
<td><code>ng g pipe my-new-pipe</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-service">Service</a></td>
<td><code>ng g service my-new-service</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-class">Class</a></td>
<td><code>ng g class my-new-class</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-guard">Guard</a></td>
<td><code>ng g guard my-new-guard</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-interface">Interface</a></td>
<td><code>ng g interface my-new-interface</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-enum">Enum</a></td>
<td><code>ng g enum my-new-enum</code></td>
</tr>
<tr>
<td><a href="https://github.com/angular/angular-cli/wiki/generate-module">Module</a></td>
<td><code>ng g module my-module</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp1-solution.zip">tp1-solution</a></p>
</blockquote>

<div id="tp2lecomposantchronometre"></div>
<h1>TP 2</h1>
<blockquote>
<p>Le composant Chronomètre</p>
</blockquote>
<p>Nous allons dans ce TP créer un composant Chronomètre. Nous verrons ainsi comment créer un composant
ainsi que la création d'un Pipe pour formater l'affiche du composant.</p>
<h2>Notre premier composant</h2>
<p>Dans le dossier <code>src/app</code>, créer un dossier <code>chrono</code>. Ce dossier contiendra les fichiers <code>html</code>, <code>css</code> et <code>ts</code>.</p>
<p>Voici la sctructure cible du projet :</p>
<pre><code>src/app
├── app.component.css
├── app.component.html
├── app.component.spec.ts
├── app.component.ts
├── app.module.ts
└── chrono
    ├── chrono.component.css
    ├── chrono.component.html
    └── chrono.component.ts
</code></pre>
<p>Vous devez donc créer les fichiers nécessaires au componsant Chrono !</p>
<p>Ensuite éditez le fichier <code>chrono.component.ts</code> et collez le contenu suivant :</p>
<pre><code class="typescript">import { Component, OnInit } from '@angular/core';

@Component({
    selector: 'chrono',
    templateUrl: './chrono.component.html',
    styleUrls: ['./chrono.component.css']
})
export class ChronoComponent implements OnInit {
    
    constructor() {
        
    }
    
    ngOnInit() {
        
    }
}
</code></pre>
<p>Puis ajoutez le composant dans la liste des composants de <code>AppModule</code> comme suivant :</p>
<pre><code class="typescript">@NgModule({
    declarations: [
        AppComponent,
        ChronoComponent // &#x3C;- Ici
    ],
    ...
})
export class AppModule { }
</code></pre>
<blockquote>
<p>Vous devez systématiquement déclarer votre composant en tant que dépendence du module pour l'utiliser !</p>
</blockquote>
<h3>Exercice 1 - Template</h3>
<p>Commencez par créer le template HTML nécessaire à l'affichage des données du chronomètre telles que:</p>
<ul>
<li>Les millisecondes,</li>
<li>Les secondes,</li>
<li>Les minutes.</li>
</ul>
<p>Et n'oubliez pas le bouton start/stop du chrono !</p>
<p>Voici un exemple de ce qui est attendu :</p>
<p><img src="images/chrono.png" alt="max-300"> </p>
<p>Vous pouvez utiliser <code>@angular/material</code> pour créer un bouton comme suivant :`</p>
<pre><code class="html">&#x3C;button md-raised-button>Text&#x3C;/button>
</code></pre>
<p>Pour le css :</p>
<pre><code class="css">:host {
    text-align: center;
    display: block;
    width: 200px;
    height: 200px;
    margin: auto;
    background: #222;
    padding: 30px;
    border-radius: 100%;
    position: relative;
    z-index: 0;
}
:host>div {
    position: relative;
    z-index: 3;
}
:host:after {
    content: ' ';
    position: absolute;
    width: 206px;
    height: 206px;
    border: 5px solid #414141;
    border-radius: 100%;
    top: -8px;
    left: -8px;
    padding: 30px;
    z-index: 0;
}
:host .times {
    display: block;
    font-size:50px;
    color:white;
    margin-bottom: 50px;
    padding-top: 30px;
}

:hover button {

}
</code></pre>
<blockquote>
<p>Note : le selecteur <code>:host</code> représente l'élément encapsulant votre composant Angular.</p>
</blockquote>
<h3>Exercice 2 - Création de l'action click</h3>
<p>À partir du cours, essayez de créer une action au click du bouton.</p>
<h3>Exercice 3</h3>
<p>Maintenant que vous avez créer l'action au click du bouton, implémentez les méthodes <code>startTimer()</code> et <code>stopTimer()</code>.</p>
<h2>Notre premier Pipe</h2>
<p>En l'état l'affichage des minutes, secondes et millisecondes n'est pas correct (cf. capture chrono).</p>
<p>Nous allons donc créer un Pipe, équivalent des filtres Angular 1, pour formatter les données.</p>
<pre><code>src/app
├── app.component.css
├── app.component.html
├── app.component.spec.ts
├── app.component.ts
├── app.module.ts
├── chrono
│   ├── chrono.component.css
│   ├── chrono.component.html
│   ├── chrono.component.spec.ts
│   └── chrono.component.ts
└── dec-to-str.pipe.ts
</code></pre>
<p>Commencez par créer le fichier <code>dec-to-str.pipe.ts</code>. Créez la <code>classe DecToStrPipe</code> comme présenté dans le cours.</p>
<h3>Exercice</h3>
<p>Le filtre doit transformer/formatter un entier vers un string sur deux chiffres !</p>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp2-solution.zip">tp2-solution</a></p>
</blockquote>

<div id="tp3creerunelistedutilisateursenligne"></div>
<h1>TP 3</h1>
<blockquote>
<p>Créer une liste d'utilisateurs en ligne</p>
</blockquote>
<p>Dans ce TP, nous allons créer un tableau contenant la liste des utilisateurs
avec leur statut en ligne. </p>
<p>Pour rappel, la structure initiale du projet est la suivante :</p>
<pre><code class="bash">src/app
├── app.component.css
├── app.component.html
├── app.component.spec.ts
├── app.component.ts
└── app.module.ts
</code></pre>
<h2>Notre 1er Service</h2>
<p>Dans le dossier <code>src/app</code>, créer votre 1er service sous le nom <code>UserService</code>.</p>
<p>Pour aller plus vite, vous pouvez utiliser l'outil <code>@angular/cli</code> pour créer votre service.</p>
<pre><code class="bash">ng g service user
</code></pre>
<p>Genèrera les fichiers suivants :</p>
<pre><code class="bash">src/app
├── user.service.spec.ts
└── user.service.ts
</code></pre>
<p>Ce service devra retourner la liste de tous les utilisateurs :</p>
<pre><code class="json">[
    {"id": 1, "email": "john.doe@gmail.com", "status": "online"},
    {"id": 2, "email": "jane.doe@gmail.com", "status": "online"},
    {"id": 3, "email": "jean.dupond@gmail.com", "status": "busy"},
    {"id": 4, "email": "jean.dupont@gmail.com", "status": "offline"},
    {"id": 5, "email": "jeanne.dupond@gmail.com", "status": "offline"},
    {"id": 6, "email": "joe.doe@gmail.com", "status": "online"}
]
</code></pre>
<h2>Le composant tableau des utilisateurs</h2>
<p>Dans le dossier <code>src/app</code>, créer un dossier <code>user-table</code> qui contiendra tout le code source du composant <code>UserTableComponent</code>.</p>
<p>Ce composant <code>UserTableComponent</code> affiche la liste des utilisateurs avec leur statut dans tableau HTML.</p>
<p>Pour aller plus vite, vous pouvez utiliser l'outil <code>@angular/cli</code> pour créer votre composant.</p>
<pre><code class="bash">ng g component user-table
</code></pre>
<p>Ci-dessous le code source ajouté au projet :</p>
<pre><code class="bash">src/app
└── user-table
    ├── user-table.component.css
    ├── user-table.component.html
    ├── user-table.component.spec.ts
    └── user-table.component.ts
</code></pre>
<p>Ajouter les feuilles de style à votre composant pour que :</p>
<ul>
<li>Les lignes pairs soient en fonds gris clair,</li>
<li>Le texte <code>online</code> soit en vert,</li>
<li>Le texte <code>offline</code> soit en gris clair,</li>
<li>Le texte <code>busy</code> soit en rouge,</li>
<li>L'entête du tableau soit en fonds bleu clair, avec le texte en blanc.</li>
</ul>
<p>Le tableau possède une checkbox (md-checkbox) permettant d'afficher soit les utilisateurs en ligne,
soit tous les utilisateurs.</p>
<h2>Composant enfant</h2>
<p>Créer un composant <code>UserTableRowComponent</code> représentant une ligne du tableau.</p>
<p>Pour aller plus vite, vous pouvez utiliser l'outil <code>@angular/cli</code> pour créer votre composant.</p>
<pre><code class="bash">ng g component user-table-row
</code></pre>
<p>Modifier votre code pour intégrer ce composant dans le composant <code>UserTableComponent</code>.</p>
<p>Ci-dessous le code source ajouté au projet :</p>
<pre><code>src/app
└── user-table-row
    ├── user-table-row.component.css
    ├── user-table-row.component.html
    ├── user-table-row.component.spec.ts
    └── user-table-row.component.ts
</code></pre>
<p>Le <code>UserTableRowComponent</code> devra gérer l'afficher des données de l'utilisateur ainsi que l'action de s'afficher ou se masquer
en fonction du statut d'affichage demandé par le composant parent.</p>
<h2>Communication entres composants</h2>
<p>Notre tableau affiche désormais les données. Nous allons maintenant utiliser l'annotation <code>@Output</code> pour émettre
un événement lorsque l'utilisateur clique sur le bouton correspondant à la ligne de l'utilisateur.
Cet événement sera remonté vers le composant <code>UserTableComponent</code> qui remontera cet événement vers le composant <code>AppComponent</code>.</p>
<p>Une fois l'information de l'utilisateur remonté dans <code>AppComponent</code>, vous devrez afficher les informations de l'utilisateur
dans une boite de dialogue (soit via une alert ou en utilisant la librairie <a href="https://material.angular.io/components/component/dialog">Material design</a>).</p>
<p><img src="images/user-table-and-popin.png" alt="max-300"> </p>
<h2>Conclusion</h2>
<p>Ce TP vous aura appris à :</p>
<ul>
<li>Utiliser les directives intégrées à Angular (<em>ngIf, </em>ngFor),</li>
<li>Créer un service Angular et l'injecter dans un composant,</li>
<li>Créer des composants avec une relation parent-enfant,</li>
<li>Créer et utiliser un template,</li>
<li>Communiquer entres les composants.</li>
</ul>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp3-solution.zip">tp3-solution</a></p>
</blockquote>

<div id="tp4formulairesetroutes"></div>
<h1>TP 4</h1>
<blockquote>
<p>Formulaires et routes</p>
</blockquote>
<p>Dans ce TP, nous allons créer les formulaires de connexion et d'authentification.
Pour ce faire nous aurons besoin de mettre en place la module de routage d'Angular
pour afficher plusieurs pages.</p>
<h2>Installation</h2>
<p>Installez le module <code>@angular/router</code> avec la commande suivante :</p>
<pre><code class="bash">npm install -g @angular/router
</code></pre>
<h2>Création des pages et des routes</h2>
<p>Nous devons maintenant créer les composants
Déclarez ensuite les routes dans un nouveau fichier <code>app.routes.js</code>. Nous devrons créer les routes suivantes :</p>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Composant</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accueil</td>
<td>/</td>
<td>HomeComponent</td>
<td>Affiche un message de bienvenu avec un bouton rediregeant l'utilisateur vers la page de connexion. Une authentifié, cette page affiche la liste des utilisateurs.</td>
</tr>
<tr>
<td>Login</td>
<td>/login</td>
<td>LoginComponent</td>
<td>Formulaire d'authentification</td>
</tr>
<tr>
<td>Signup</td>
<td>/signup</td>
<td>SigninComponent</td>
<td>Formulaire d'inscription</td>
</tr>
</tbody>
</table>
<ol>
<li>Commencez par créer les composants énoncés dans le tableau. </li>
<li>Ensuite, vous devrez écrire vos routes dans le fichier <code>app.routes.js</code> en fonction de tableau ci-dessus.</li>
<li>Importez vos routes dans votre application <code>app.module.js</code>comme suivant :</li>
</ol>
<pre><code class="typescript">import { ROUTES } from "./app.routes";
import { RouterModule } from "@angular/router";

@NgModule({
    ...
    imports: [
        RouterModule.forRoot(ROUTES)
    ],
    ...
}
</code></pre>
<p>Enfin vous devez indiquer au routeur où seront afficher les vues dans votre application.</p>
<pre><code class="html">&#x3C;router-outlet>&#x3C;/router-outlet>
</code></pre>
<h3>Page d'accueil</h3>
<p>La page d'accueil devra afficher la liste des utilisateurs une fois authentifié.
Commencez par réintégrer la liste des utilisateurs dans HomeComponent. Nous nous occuperons des règles d'affichage plus tard.</p>
<h3>Page d'authentification</h3>
<p>Nous allons maintenant utiliser les API Formulaires d'Angular. Nous utiliserons ici les <code>formulaires pilotés par le template</code>
mais vous êtes libre d'utiliser la seconde approche.</p>
<p>Le formulaire de connexion présentera les éléments suivants :</p>
<ul>
<li>Un champ e-mail, qui est un champ obligatoire et doit respecter le pattern e-mail,</li>
<li>Un champ mot de passe, qui est un champ obligatoire,</li>
<li>Un bouton de connexion, actif que si toutes les données saisies sont valides,</li>
<li>Un bouton <code>ou m'enregister</code> pour rediriger l'utilisateur vers la page d'inscription.</li>
</ul>
<p>N'oubliez pas d'afficher les messages en fonction du type d'erreur du champs associé.</p>
<p>Voici un exemple du formulaire attendu en Material :</p>
<p><img src="images/login.png" alt="max-300"> </p>
<h3>Le service Authenticate</h3>
<p>Une fois le formulaire réalisé, vous devrez créer le service <code>AuthenticateService</code> (<code>ng g service authenticate</code>) qui aura pour fonction d'authentifier
l'utilisateur. </p>
<p>Ce service exposera les méthodes suivantes :</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Descripton</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>authenticate(email: string, password: string): boolean</code></td>
<td>Permet d'authentifier l'utilisateur. Stocke l'utilisateur dans le localStorage et émet un événement sur le flux 
<code>onSignin</code>
.</td>
</tr>
<tr>
<td><code>logout()</code></td>
<td>Supprimer les infos stocker dans le localStorage et émet un événement sur le flux onLogout.</td>
</tr>
<tr>
<td><code>getUser()</code></td>
<td>Retourne l'utilisateur connecté et stocké dans le localStorage.</td>
</tr>
<tr>
<td><code>get onSignin(): EventEmitter&#x3C;User></code></td>
<td>Retourne l'objet (ou flux) 
<code>EventEmmiter</code>
 dédié à l'événement onSignin.</td>
</tr>
<tr>
<td><code>get onLogout(): EventEmitter&#x3C;boolean></code></td>
<td>Retourne l'objet (ou flux) 
<code>EventEmmiter</code>
 dédié à l'événement onLogout.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Nous utiliserons la class EventEmitter pour permettre à des composants de s'abonner à des événements.</p>
</blockquote>
<h3>La page d'accueil (fin)</h3>
<p>Maintenant que vous avez un service AuthenticateService de prêt, vous pouvez gérer les règles d'affichage de cette page !</p>
<h3>Page d'inscription</h3>
<p>Le formulaire d'inscription présentera les éléments suivants :</p>
<ul>
<li>Prénom, qui est un champ obligatoire, </li>
<li>Nom, qui est un champ obligatoire, </li>
<li>Un champ e-mail, qui est un champ obligatoire et doit respecter le pattern e-mail,</li>
<li>Un champ mot de passe, qui est un champ obligatoire,</li>
<li>Un bouton de enregistrer, actif que si toutes les données saisies sont valides,</li>
</ul>
<p>Ensuite rajouter les fonctions permettant d'ajouter un utilisateur dans liste d'utilisateurs du service <code>UserService</code>.</p>
<h3>La navbar (bonus)</h3>
<p>Une application est toujours plus belle lorsque cette dernière possède une <code>navbar</code>.</p>
<p>Cette navbar devra s'afficher sur l'ensemble des pages. Elle devra afficher les liens suivants :</p>
<ul>
<li>Home,</li>
<li>Signin lorsque aucun utilisateur n'est authentifié,</li>
<li>Signout lorsqu'un utilisateur est authentifié.</li>
</ul>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp4-solution.zip">tp4-solution</a></p>
</blockquote>

<div id="tp5integrationdeswebservices"></div>
<h1>TP 5</h1>
<blockquote>
<p>Intégration des webservices</p>
</blockquote>
<p>Nous avons maintenant besoin de faire fonctionner notre application avec des vrais webservice.</p>
<p>Nous allons donc utiliser le module Http d'Angular pour consommer des services Rest.</p>
<h1>Installation du serveur</h1>
<p>Le serveur est déjà développé. Il expose un certain nombre de service que nous détaillerons par la suite.</p>
<p>Commençons par l'installer avec la commande suivante :</p>
<pre><code class="bash">npm install --save labs-angular-backend
npm install --save-dev concurrently
</code></pre>
<p>Ensuite nous allons créer un fichier <code>server.js</code> à la racine du projet. Dans ce fichier copiez le code suivant :</p>
<pre><code class="javascript">const labsAngularBackend = require("labs-angular-backend");

new labsAngularBackend.Server().start().catch(er => console.error(er));
</code></pre>
<p>Pour nous simplifier la vie nous allons rajouter des commandes npm dans le <code>package.json :</code></p>
<pre><code class="json">{
  "script": {
      "start": "npm install &#x26;&#x26; concurrently \"npm run start:server\" \"npm run start:app\"",
      "start:app": "ng serve --proxy-config proxy.conf.json",
      "start:server": "node server.js"
  }
}
</code></pre>
<blockquote>
<p>npm run start démarrera désormais l'application front et le serveur en même temps.</p>
</blockquote>
<p>Il nous reste à configurer le proxy de <code>ng serve</code> pour que l'application web puisse consommer les webservices.
Créez un nouveau fichier <code>proxy.conf.json</code> et copiez la configuration suivante :</p>
<pre><code class="json">{
  "/api/*": {
    "target": "http://localhost:8080",
    "changeOrigin": true,
    "secure": false,
    "logLevel": "debug"
  },
  "/socket.io/*": {
    "target": "http://localhost:8080",
    "changeOrigin": true,
    "secure": false,
    "logLevel": "debug"
  }
}
</code></pre>
<p>Enfin lancez la commande <code>npm run start</code> pour vérifier que l'ensemble fonctionne !</p>
<h2>Les webservices exposés</h2>
<p>Voici la liste des webservices :</p>
<pre><code class="bash">┌────────┬───────────────────────────┬─────────────────────────┐
│ Method │ Endpoint                  │ Class method            │
│────────│───────────────────────────│─────────────────────────│
│ ALL    │ /api/                     │ RestCtrl.test()         │
│────────│───────────────────────────│─────────────────────────│
│ GET    │ /api/html                 │ RestCtrl.render()       │
│────────│───────────────────────────│─────────────────────────│
│ POST   │ /api/users/               │ UserCtrl.create()       │
│────────│───────────────────────────│─────────────────────────│
│ GET    │ /api/users/               │ UserCtrl.getList()      │
│────────│───────────────────────────│─────────────────────────│
│ PATCH  │ /api/users/:email/:status │ UserCtrl.updateStatus() │
│────────│───────────────────────────│─────────────────────────│
│ GET    │ /api/users/:idOrEmail     │ UserCtrl.get()          │
│────────│───────────────────────────│─────────────────────────│
│ PUT    │ /api/users/:id            │ UserCtrl.update()       │
│────────│───────────────────────────│─────────────────────────│
│ DELETE │ /api/users/:id            │ UserCtrl.remove()       │
│────────│───────────────────────────│─────────────────────────│
│ POST   │ /api/users/authenticate   │ UserCtrl.authenticate() │
└────────┴───────────────────────────┴─────────────────────────┘
</code></pre>
<p>Avec les informations dont vous disposez concernant les webservices, vous pouvez integrer
ces services dans votre application.</p>
<p>Commencez par integrer le service retournant la liste des utilisateurs !
Ensuite vous pouvez intégrer tous les autres services sauf la suppression (en bonus).</p>
<p><strong>Note :</strong> Dans ce TP, vous n'avez pas pour obligation d'utiliser l'API reactive avec le module Http.
Vous pouvez directement transformer l'objet Observable retourner par Http en Promise comme suivant :</p>
<pre><code class="typescript">http.get(`/api/users`).toPromise() => Promise 
</code></pre>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp5-solution.zip">tp5-solution</a></p>
</blockquote>

<div id="tp6programmationreactiveetwebsocket"></div>
<h1>TP 6</h1>
<blockquote>
<p>Programmation réactive et websocket</p>
<p>Correction du TP : <a href="../../Resources/tp6-solution.zip">tp6-solution</a></p>
</blockquote>

    </article>
</div>

<footer class="page-footer">

    <div class="container">

        <div class="row">
            <div class="col l12 s12">
                <p><a href="mailto:info@valtech.fr">info@valtech.fr</a></p>
                <p>Vous avez une vision concernant l'avenir digital de votre entreprise ? N'hésitez pas à nous contacter.</p>
                <p>Tél : 01 76 21 15 00</p>
                <p class="foot__offices">
                    <span>Aarhus | Amserfoort | Amsterdam | Bangalore | Bristol | Buenos Aires | Chicago | Copenhagen | Dallas | Düsseldorf | Eindhoven | Frankfurt | Geneva | Gurgaon | Göteborg | Honolulu | London | Malmö | Manchester | Montreal | Munich | New York | Paris | Singapore | Stockholm | Sydney | Uppsala | Utrecht | Västerås</span>
                </p>
            </div>
        </div>

        <div class="footer-social">
            <ul>
                <li><a href="https://www.facebook.com/valtech.fr"><i class="glyph" data-icon="facebook" title="Suivez-nous à facebook" aria-hidden="true"></i><span class="hidden">facebook</span></a></li>
                <li><a href="https://www.linkedin.com/company/valtech"><i class="glyph" data-icon="linkedin" title="Suivez-nous à linkedin" aria-hidden="true"></i><span class="hidden">linkedin</span></a></li>
                <li><a href="https://www.instagram.com/valtech_fr/"><i class="glyph" data-icon="instagram" title="Suivez-nous à instagram" aria-hidden="true"></i><span class="hidden">instagram</span></a></li>
                <li><a href="https://twitter.com/Valtech_FR"><i class="glyph" data-icon="twitter" title="Suivez-nous à twitter" aria-hidden="true"></i><span class="hidden">twitter</span></a></li>
            </ul>
        </div>



    </div>

    <div class="footer-copyright">
        <div class="container">

            © Valtech 2016

            <a  class="grey-text text-lighten-4 right"  href="http://valtech.fr/services/mentions-legales-cgu/">
                Mentions légales / CGU
            </a>

            </ul>
        </div>
    </div>

</footer>

<script type="text/javascript" src="assets/scripts/jquery.min.js"></script>
<script type="text/javascript" src="assets/scripts/materialize.min.js"></script>
<script type="text/javascript" src="assets/scripts/highlight.pack.js"></script>

<script>
    $( document ).ready(function(){
        $(".button-collapse").sideNav();
        $(".dropdown-button").dropdown();
    });
</script>


<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>